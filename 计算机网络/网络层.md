# 网络层

互联网的设计思路：**网络层向上只提供简单灵活的，无连接的，尽最大努力交付的数据报服务**。

* 网络层不提供服务质量的承诺，数据报传输可能出错，丢失等等。
* 如果需要可靠通信的话，我们就可以在运输层里面进行实现。

上面设计思路的优点在于：

* 极大的降低了网络中路由器的造价，运行方式灵活，可以适用多种应用。

![image-20201215205113131](网络层.assets/image-20201215205113131.png)

虚电路表示只是逻辑上的连接，分组都沿着这条逻辑连接按照存储转发的方式传送，而不是真正建立了一条物理连接。

![image-20201215210715986](网络层.assets/image-20201215210715986.png)

## 网际协议IP

与IP协议配套使用的三个协议

1. 地址解析协议ARP
2. 网际控制报文协议ICMP
3. 网际管理协议IGMP

![image-20201215211324299](网络层.assets/image-20201215211324299.png)

`虚拟互联网络`

> 没有一种单一的网络能够适应所有用户的需求。

网络有很多种，而且层出不穷，连接网络需要中间设备：

1. 物理层使用的中间设备：`转发器`
2. 数据链路层使用的中间设备：`网桥`或者`桥接器`。
3. 网络层使用的中间设备`路由器`
4. 网络层以上使用的中间设备叫做`网关`，网关连接两个不兼容的系统需要在高层进行协议转换。

![image-20201215212749427](网络层.assets/image-20201215212749427.png)

物理网络的异构性本来是客观存在的，但是我们利用`IP协议`就可以使得这些性能各异的网络在网络层看起来好像是一个统一的网络。

分组传送问题：

![image-20201215213510383](网络层.assets/image-20201215213510383.png)

H1发送数据报给H2

1. H1检查自己的路由表，如果查到说明H2在本网络，所以直接交付。
2. 如果不是，那么就发送给某个路由器进行间接交付。

上图还有一个结论:`互联网可以由多个异构网络互连组成`。

`分类的IP地址`

IP地址由`互联网名字和数字分配机构ICANN`进行分配。

IP地址识别：

![image-20201215214742137](网络层.assets/image-20201215214742137.png)











